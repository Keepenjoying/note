# Command Tips

## 正則工具

http://rubular.com/


## Linux 批次修改副檔名

`把副檔名抓成 IMG0000.jpg.jpg ，但我預期的副檔名應該是 IMG0000.jpg`

```sh
rename -v 's/\.jpg.jpg$/\.jpg/' *.jpg
```

## sed 替換字串使用正則
`.. image:: /_static/seq_Mediator.jpg`替換成`![](../_static/seq_Mediator.jpg)`



```sh
echo ".. image:: /_static/SimpleFactory.jpg"|sed -r 's/^.*:: (.*)/![](\1)/'

![](/_static/SimpleFactory.jpg)
```

`(.*)`  // pattern `/_static/SimpleFactory.jpg`

`\1`  // 代表是第一組 pattern 即是 `/_static/SimpleFactory.jpg`

```
echo ".. image:: /_static/SimpleFactory.jpg"|sed -r 's/^.*:: (.*)/![]\1/'

![]/_static/SimpleFactory.jpg
```


```sh
find . -name '*.rst' -exec sed -ri.bak 's/^.*:: (.*)/![](\.\.\1)/' {} \;
```

##  用 uniq 和 sort 指令清除重複行和空白行



```sh
sort chtuniq.txt | uniq > result.txt
```
`上面這行指令只能留下不重覆的行，所以，還是會有一個空白行的哩 !`

```sh
sort chtuniq.txt | uniq | sed /^$/d > result.txt
```

`為什麼在用 uniq 指令前要先用 sort 指令來排序一下呢 ? 這是因為 uniq 指令只跟上一行比對是否有重複而已，所以，如果重複的資料不排在一起，那麼 uniq 指令就等於是無效哩 ! 所以，在使用  uniq 指令前，要先搖一搖，喔 ! 不! 是要先用 sort 指令排一排哩 !`

