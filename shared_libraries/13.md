# Command Tips

# 正則工具

http://rubular.com/


# Linux 批次修改副檔名

`把副檔名抓成 IMG0000.jpg.jpg ，但我預期的副檔名應該是 IMG0000.jpg`

```sh
rename -v 's/\.jpg.jpg$/\.jpg/' *.jpg
```

# sed 替換字串使用正則
`.. image:: /_static/seq_Mediator.jpg`替換成`![](../_static/seq_Mediator.jpg)`



```sh
echo ".. image:: /_static/SimpleFactory.jpg"|sed -r 's/^.*:: (.*)/![](\1)/'

![](/_static/SimpleFactory.jpg)
```

`(.*)`  // pattern `/_static/SimpleFactory.jpg`

`\1`  // 代表是第一組 pattern 即是 `/_static/SimpleFactory.jpg`

```
echo ".. image:: /_static/SimpleFactory.jpg"|sed -r 's/^.*:: (.*)/![]\1/'

![]/_static/SimpleFactory.jpg
```


```sh
find . -name '*.rst' -exec sed -ri.bak 's/^.*:: (.*)/![](\.\.\1)/' {} \;
```
