# Linux 静态库与共享库的使用


##一、静态库

###1、概念：
静态库指将所有相关的目标文件打包成为一个单独的文件-即静态库文件，以.a结尾。`静态库可作为链接器的输入`，链接器会将程序中使用的到函数的代码从库文件中拷贝到应用程序中。`一旦链接完成，在执行程序的时候就不需要静态库了`。

- 注1：由于每个使用静态库的应用程序都需要拷贝所用函数的代码，所以静态链接的文件会比较大。
- 注2：在Unix系统中，静态库以一种称为存档（archive）的特殊文件格式存放在磁盘中。存档文件是一组连接起来的可重定位目标文件的集合，有一个头部用来描述每个成员目标文件的大小和位置（存档文件名由后缀.a标识）。

###2、创建与应用

假设我们想在一个叫做libvector.a的静态库中提供以下向量函数：

```c
// addvec.c
void addvec(int* x, int* y, int* z, int n)
{
    int i = 0;

    for (; i < n; ++i) {
        z[i] = x[i] + y[i];
    }
}
```

```c
// multvec.c
void multvec(int* x, int* y, int*  z, int n)
{
    int i = 0;

    for (; i < n; ++i) {
        z[i] = x[i] * y[i];
    }
}
```

使用AR工具创建静态库文件：

为了使用这个库，编写一个应用（其调用addvec库中的函数）：